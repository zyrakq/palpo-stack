# Generated by stackbuilder from concatenated .env.example files
# Source files: base/.env.example, letsencrypt/.env.example, oidc/.env.example

# Project name for Docker Compose
COMPOSE_PROJECT_NAME=palpo

# === BASE CONFIGURATION ===
TZ=Europe/Moscow
POSTGRES_DB=palpo
POSTGRES_USER=palpo
POSTGRES_PASSWORD=changeme
POSTGRES_INITDB_ARGS="--encoding=UTF8 --lc-ctype=C --lc-collate=C"

PALPO_IMAGE=chrislearn/palpo:latest
# PALPO_IMAGE=ghcr.io/palpo-im/palpo:latest

PALPO_CONFIG=/var/palpo/palpo.toml

PALPO_ADDRESS=0.0.0.0:8008
PALPO_SERVER_NAME=matrix.example.com
PALPO_TRUSTED_SERVERS='["matrix.org", "mozilla.org"]'

PALPO_ALLOW_REGISTRATION=false
PALPO_FEDERATION_ENABLE=true

PALPO_MAX_UPLOAD_SIZE=20000000

PALPO_DB_POOL_SIZE=10
# === LETSENCRYPT CONFIGURATION ===
# Virtual host domain for nginx-proxy
VIRTUAL_PORT=8008
VIRTUAL_HOST=matrix.example.com

# Let's Encrypt SSL certificate domain
LETSENCRYPT_HOST=matrix.example.com

# Email for Let's Encrypt certificate registration
LETSENCRYPT_EMAIL=john.smith@mail.com
# OIDC
PALPO_OIDC_ENABLE=true
PALPO_OIDC_PROVIDERS_SSO_ISSUER=https://sso-server/realms/matrix
PALPO_OIDC_PROVIDERS_SSO_CLIENT_ID=palpo
PALPO_OIDC_PROVIDERS_SSO_CLIENT_SECRET=<CLIENT_SECRET>
PALPO_OIDC_PROVIDERS_SSO_REDIRECT_URI=https://server/_matrix/client/oidc/callback
PALPO_OIDC_PROVIDERS_SSO_SCOPES='["openid", "profile", "email", "groups"]'
PALPO_OIDC_PROVIDERS_SSO_DISPLAY_NAME=SSO
PALPO_OIDC_ALLOW_REGISTRATION=true
PALPO_OIDC_ENABLE_PKCE=true
PALPO_OIDC_USER_MAPPING=email
PALPO_OIDC_SESSION_TIMEOUT=600